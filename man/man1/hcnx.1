.TH "hcnx" "1" "5 March 2015" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBhcnx\fP - extract daily climate data from Historical Climate Network
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBhcnx\fP \fB-i\fP \fIinfile\fP [ \fB-h\fP ] [ \fB-y\fP \fIyear\fP ] [ \fB-m\fP \fImonth\fP ] [ \fB-d\fP \fIday\fP ]
      [ \fB-t\fP \fItype\fP,\fI...\fP ] [ \fB-a\fP \fIdrain_area\fP ] [ \fB-l\fP \fIeast\fP,\fInorth\fP ]
.ft R
.fi
.SH DESCRIPTION
.PP
Hcnx is designed to extract daily climate information from standard
format data files from the Historical Climate Network of the U.S.
Hcnx extracts the requested daily temperature, precipitation or
stream flow data from the given input file and converts the units
(temperatures from degrees F to degrees C, precip from hundredths
of inches to millimeters, and runoff from cubic feet per second
to depth of flow in millimeters per square meter).  The converted
data is appended to daily output file(s).
.PP
The input file is assumed to be named s<station_ID>.dat for
temp/precip data or q<station_ID>.dat or x<station_ID>.dat for
streamflow data, where <station_ID> is the 6 character HCN station
ID or 9 character USGS streamflow data ID.
.PP
The converted data for each requested day is appended to an output
file named type.year.yd where
.sp
.nf
.ft CR
	type	is the data type: prcp, tmin, tmax, or roff
	year	is the requested year
	yd	is the julian or water day (0 - 365)
.ft R
.fi

.PP
Each line of data in the output files has the format:
.sp
.nf
.ft CR
	station_ID data
.ft R
.fi

.PP
or, if the \fB-l (location) option is specified, the line will have the
format:
.sp
.nf
.ft CR
	easting northing data
.ft R
.fi

.PP
where
.sp
.nf
.ft CR
	station_ID	is the 6-character station ID
	easting		is the easting geographic coordinate
	northing	is the northing geographic coordinate
	data		is the converted precip or temp value
.ft R
.fi

.PP
With the \fB-l option specified, running this program for all the
stations in a desired geographical area will produce daily output
files that are suitable input files for the surface interpolation
program "surface" to obtain IPW raster image file of interpolated
data (see documentation for IPW surface program).
.PP
If a suspicious value flag for a data field of tmin, tmax, or prcp
is not blank or if the runoff value is "no data": 999999, the line
of data is not written to the output file and the following line
is written to the file type.year.errs:
.sp
.nf
.ft CR
	station_ID year yd sus_val data_code data
.ft R
.fi

.PP
where
.sp
.nf
.ft CR
	sus_val		is the suspicious value flag
			(see data documentation for code meanings)
	data_code	is the derivation of data code
			(see data documentation for code meanings)
	data		is the UNCONVERTED data value
.ft R
.fi
.SH OPTIONS
.TP
\fB-i\fP \fIinfile\fP
input file name: s<station_ID>.dat or q<station_ID>.dat
.sp
.TP
\fB-h\fP
flag for hydrological year order (default: calendar year)
note: if specified, then year and month are also interpreted
as hydrological year and month (i.e. "\fB-m 1 \fB-y 1985" for
Oct 1984)
.sp
.TP
\fB-y\fP \fIyear\fP
year of data to extract (default: all)
.sp
.TP
\fB-m\fP \fImonth\fP
month of data to extract (default: all)
.sp
.TP
\fB-d\fP \fIday\fP
day of month to extract (default: all)
.sp
.TP
\fB-t\fP \fItype\fP,\fI...\fP
type(s) of data to extract: prcp, tmin, or tmax
(only used for temp/precip data; default: all types in file)
.sp
.TP
\fB-a\fP \fIdrain_area\fP
drainage area in square miles
(NOTE: required for runoff data)
.sp
.TP
\fB-l\fP \fIeast\fP,\fInorth\fP
geographic location of station: easting, northing
if specified, location will be substituted for station ID
in output file
.SH OPERANDS
.PP
None
.SH EXAMPLES
.PP
To extract data for the station "foo", for all of February, 1990:
.sp
.nf
.ft CR
	hcnx -i foo.dat -y 1990 -m 02
.ft R
.fi
.SH FILES
.PP
None
.SH DIAGNOSTICS
.PP
None
.SH RESTRICTIONS
.PP
None
.SH HISTORY
.TP
Jul 1991
  Written by Kelly Longley, Oregon State University,
Environmental Research Laboratory, Corvallis OR
.TP
Jul 1991
  Added \fB-l option to substitute geographic projection for
station ID in output file, by K. Longley, USEPA, ERL-C
.TP
Sep 1991
	 Added processing for runoff data (and \fB-a option), by Kelly
Longley, OSU, USEPA ERL-C
.TP
Aug 1997
	 Converted to IPW Version 2.0, by D. Marks, USGS, ERL-C
.SH BUGS
.PP
If the HCN file format is changed from what was distributed in 1991-92,
which is probably certain, then \fBhcnx\fP won't work.
.SH SEE ALSO
.PP
Karl 1990
.br
