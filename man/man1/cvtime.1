.TH "cvtime" "1" "25 April 2009" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBcvtime\fP - convert dates and times between different formats
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBcvtime\fP [ \fB-i\fP \fIinfmt\fP ] [ \fB-o\fP \fIoutfmt\fP ] [ \fB-y\fP \fIyear\fP ] [ \fB-l\fP \fIzone\fP ]
      [ \fB-g\fP \fIzone\fP ] [ \fB-h\fP ] [ \fB-s\fP ]  [ \fIdate-time\fP ]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBcvtime\fP converts between various date-time formats.  A date-time format
is specified in one of two ways: 1) using predefined formats, or 2) using
format codes.  Predefined formats are referenced by name, and are listed below:
.sp
.nf
.ft CR
    Name   Interpretation

    jd     Julian Days (decimal days; Jan 1, midnight = 0.0)
    jd1    Julian Days (decimal days; Jan 1, midnight = 1.0;
                        hence "jd1" is equivalent to "jd"+1)
    wy     Water Year Days (decimal days; Oct 1, midnight = 0.0)
    wy1    Water Year Days (decimal days; Oct 1, midnight = 1.0;
                            hence "wy1" is equivalent to "wy"+1)
    date   yyyy,mm,dd,hh,mm,ss
.ft R
.fi

.PP
Formats other than those predefined above can be specified using format
codes in a format string.  If the argument to either the \fB-i\fP or
the \fB-o\fP options is not one of the predefined formats, then \fBcvtime\fP
treats it as a format string.
.PP
A format string explicitly describes the format of a date-time, using
characters and format codes.  Characters represent themselves, while
format codes represent components of a date-time.  A format code is a
character sequence that begins with a percent sign ("%").
.PP
\fBInput formats\fP
.PP
A character in an input format string indicates that that character
must be in the date-time in the designated location.  Format codes
available for input formats are:
.sp
.nf
.ft CR
    Code   Interpretation

    %y     year within century (1 or 2 digits, e.g., 98, 07, 7)
    %Y     year (up to 4 digits; note: 90 = 90, not 1990)
    %m     month (1 or 2 digits; range = 1 to 12)
    %d     day of month (1 or 2 digits; range = 1 .. 31)
    %j     day of year (1 to 3 digits; range= 1 to 366)
    %Jd    Julian day (decimal days; Oct 1, midnight = 0.0)
    %J1    Julian day (decimal days; Oct 1, midnight = 1.0;
                       hence "J1" is equivalent to "Jd"+1)
    %wy    wateryear within century (1 or 2 digits)
    %wY    wateryear (up to 4 digits)
    %wd    day of wateryear (1 to 3 digits; range = 1 to 366)
    %Wd    wateryear day (decimal days; Oct 1, midnight = 0.0)
    %W1    wateryear day (decimal days; Oct 1, midnight = 1.0;
                          hence "W1" is equivalent to "Wd"+1)

    %H     hour (1 or 2 digits; range = 0 (midnight) to 23)
    %M     minutes (1 or 2 digits; range = 0 to 59)
    %S     seconds (1 or 2 digits; range = 0 to 59)
    %h     hour (12-hour clock; 1 or 2 digits; range = 1 to 12)
    %a     am/pm for 12-hour clock (= "am" or "pm")
    %A     am/pm for 12-hour clock (= "AM" or "PM")

    %%     a single "%"
    %?     matches any character
    %+     1 or more whitespace characters
    %*     0 or more whitespace characters
.ft R
.fi

.PP
For example, the input format string
.sp
.nf
.ft CR
    "%y/%m/%d"
.ft R
.fi

.PP
will accept the date February 9, 1998 in any of these forms
.sp
.nf
.ft CR
    98/2/9
    98/2/09
    98/02/09
    98/02/9
.ft R
.fi

.PP
Certain format codes are not compatible, and therefore, cannot be
used with an input format string.  For example, the "%y" and "%wy"
codes are not compatible, as are the "%H" and "%h" codes.
.ft R
.fi

.PP
The "%Jd", "%Jd1" and "%Wyd", "%Wyd1" are format codes that duplicate
the pre-defined formats jd, jd1, wy, and wy1 formats.  They are not
compatible with anything else except the "%Y", "%y", or "%wy", "%wY"
codes.  If these are not included, the default year or wateryear are assumed.
.PP
When reading an input date-time using a format string, \fBcvtime\fP
uses default values for those components that are not explicitly specified.
These defaults are:
.sp
.nf
.ft CR
    Component     Default value for input

    year          current year
    century       century of current year (for %y)
    month         1 (January)
    day           1 (1st day of month)
    yearday       1 (January 1st)

    wateryear     current wateryear
    century for   century of current wateryear (for %wy)
      wateryear
    waterday      1 (October 1st)

    hour          0 (midnite)
    minutes       0
    seconds       0
    AM/PM         AM
.ft R
.fi

.PP
\fBOutput formats\fP
.PP
A character in an output format string indicates that that
character will appear in the formated date-time at the designated
location.  Format codes for output formats are:
.sp
.nf
.ft CR
    Code   Interpretation

    %y     year within century (2 digits, e.g., 07, 98)
    %Y     complete year (4 digits)
    %m     month (2 digits, e.g., 03, 11)
    %^m      month (1 or 2 digits, e.g., 3, 11)
    %d     day (2 digits, e.g., 06, 30)
    %^d      day (1 or 2 digits, e.g., 6, 30)
    %j     yearday (3 digits, e.g., 007, 045, 338)
    %^j      yearday (1 to 3 digits, e.g., 7, 45, 338)
    %Jd    Julian day (decimal days; Oct 1, midnight = 0.0)
    %J1    Julian day (decimal days; Oct 1, midnight = 1.0;
                       hence "J1" is equivalent to "Jd"+1)
    %wy    water year within century (2 digits)
    %wY      complete wateryear (4 digits)
    %w     waterday (3 digits, e.g., 009, 071, 266)
    %^w      waterday (1 to 3 digits, e.g., 009, 071, 266)
    %Wd    wateryear day (decimal days; Oct 1, midnight = 0.0)
    %W1    wateryear day (decimal days; Oct 1, midnight = 1.0;
                          hence "W1" is equivalent to "Wd"+1)

    %H     hour (2 digits, e.g., 00, 22)
    %^H      hour (1 or 2 digits, e.g., 0, 22)
    %M     minute of day (2 digits, e.g., 00, 30)
    %S     seconds of day (2 digits, e.g., 05, 59)
    %h     hour (12-hour clock; 2 digits, e.g., 01, 12)
    %^h      hour (12-hour clock; 1 to 2 digits, e.g., 1, 12)
    %a     "am" or "pm" for 12-hour clock
    %A     "AM" or "PM" for 12-hour clock

    %%     a single "%"
.ft R
.fi

.PP
Unlike input format codes, any of the output format codes can be used in
the single format string.  For example, the output format string
.sp
.nf
.ft CR
    "On %y/%m/%d, yearday = %^j, water year and day = %wY, %w"
.ft R
.fi

.PP
would format the date-time of February 9, 1998, 4:30 pm as
.sp
.nf
.ft CR
    "On 98/02/09, yearday = 40, water year and day = 1998, 132"
.ft R
.fi

.PP
Output times will be the same time zone as input times unless the
\fB-l (from GMT to local) or \fB-g (from local to GMT) options
are specified.
.PP
Default time unit for "jd" and "wy" formats is decimal days.  If the
hours (\fB-h) or seconds (\fB-s) option is specified, then the
requested time units will be used for input and output.
.SH OPTIONS
.TP
\fB-i\fP \fIinfmt\fP
\fIinfmt\fP is the input format; it is either the name of a predefined
format, or a string using format codes.  (default: the format string
"%Y_%m_%d+%H:%M:%S").
.sp
.TP
\fB-o\fP \fIoutfmt\fP
\fIoutfmt\fP is the output format; it is either the name of a predefined
format, or a string using format codes.  (default: the format string
"%Y_%m_%d+%H:%M:%S").
.sp
.TP
\fB-y\fP \fIyear\fP
This option is required when the following predefined formats are
used for the input format (\fB-i\fP option): "jd", "jd1", "wy", and "wy1".
.sp
.TP
\fB-l\fP \fIzone\fP
Convert the date-time from GMT to the local time zone.  The local
time zone, \fIzone\fP, is specified as minutes west of Greenwich.
.sp
.TP
\fB-g\fP \fIzone\fP
Convert the date-time from the local time zone to GMT.  The local
time zone, \fIzone\fP, is specified as minutes west of Greenwich.
convert from local time zone to GMT (minutes west of Greenwich)
.PP
At most one of \fB-l or \fB-g may be specified.
.TP
\fB-h\fP
For the predefined formats "jd", "jd1", "wy", and "wy1", unit of time is
decimal hours (default: decimal days).
.sp
.TP
\fB-s\fP
For the predefined formats "jd", "jd1", "wy", and "wy1", unit of time is
decimal seconds (default: decimal days).
.PP
At most one of \fB-h or \fB-s may be specified.
.SH OPERANDS
.TP
\fIdate-time\fP
The date-time to be converted.  It must match the specified input format.
(default: A sequence of date-times will be read from standard input,
with one date-time per line).
.SH EXAMPLES
.PP
To determine the yearday for February 9, 1998:
.sp
.nf
.ft CR
    prompt> cvtime -i "%y/%m/%d" -o %^j 98/02/09
    40
    prompt>
.ft R
.fi

.PP
The following example would produce the same output as the previous example:
.sp
.nf
.ft CR
    cvtime -o %^j 1998_02_09+00:00:00
.ft R
.fi

.PP
This following example can be used to convert the date-time October 7, 1998,
4 pm into the filename extension ".99007_16":
.sp
.nf
.ft CR
    cvtime -i "%m/%d/%y %h %a" -o ".%wy%w_%H" "10/7/98 4 pm"
.ft R
.fi
.SH FILES
.PP
None.
.SH DIAGNOSTICS
.TP
Input and output formats are the same
.sp
.TP
\fB-h and \fB-s options are mutually exclusive
.sp
.TP
\fB-g and \fB-l options are mutually exclusive
.sp
.TP
Must specify \fB-y year option
If the input format is "jd", "jd1", "wy" or "wy1", then a year
must be supplied.
.SH RESTRICTIONS
.PP
None
.SH HISTORY
.TP
Sep 1986
Qdips program "anytime" written by D. Marks, CSL, UCSB
.sp
.TP
Oct 1990
IPW version \fBcvtime\fP written to replace Qdips program
"anytime" by Kelly Longley, Oregon State University,
Environmental Research Laboratory, Corvallis OR
.sp
.TP
Aug 1995
Added "jd1" and "wy1" time formats.  J. Domingo, OSU
.sp
.TP
Nov 1996
Fixed bug when input format was water year day.  J. Domingo, OSU
.sp
.TP
Aug 1997
Converted to IPW Version 2.0; replaced use of Unix time structure
"unixtime" with IPW time structure "datetime_t", which uses standard library
functions and eliminates the need for seperate subroutine calls;  added input
value checking for date function to cvtime.c (previously done by unixtime).
J. Domingo, OSU & D. Marks, USGS, ERL-C
.sp
.TP
Nov 1998
Added the use of format codes.  Also allowed a single date-time to be
specified as the sole operand.  J. Domingo, OSU
.sp
.TP
Feb 1999
Added format codes %Jd, %J1, %Wd, and %W1 to allow use of decimal
days within formatted input and output.  D. Marks, ARS, NWRC
.SH SEE ALSO
.TP
IPW
\fBaddtime\fP
.PP
.TP
UNIX
date, printf
