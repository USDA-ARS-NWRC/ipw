.TH "mkprecip" "1" "5 March 2015" "IPW v2" "IPW User Commands"
.SH NAME
.PP
\fBmkprecip\fP - make precipitation images for 'isnobal' command
.SH SYNOPSIS
.sp
.nf
.ft CR
\fBmkprecip\fP [\fIimage\fP]
.ft R
.fi
.SH DESCRIPTION
.PP
\fBmkprecip\fP makes precipitation images for isnobal(1).  The input
image is a 2-band image:
.sp
.nf
.ft CR
	band 0 = total precipitation mass (kg/m^2)
	band 1 = precipitation temperature (C)
.ft R
.fi

.PP
\fBmkprecip\fP calculates the precentage of the mass that's snow
based on the given temperature.  It also determines the snow's
density.  This is based on the following table:
.sp
.nf
.ft CR
	temperature		% snow	snow density
.ft R
.fi

.sp
.nf
.ft CR
	          T < -5 C	 100%	   75 kg/m^3
	  -5 C <= T < -3 C	 100%	  100 kg/m^3
	  -3 C <= T < -1.5 C	 100%	  150 kg/m^3
	-1.5 C <= T < -0.5 C	 100%	  175 kg/m^3
	-0.5 C <= T < 0 C	  75%	  200 kg/m^3
	   0 C <= T < 0.5 C	  25%	  250 kg/m^3
	 0.5 C <= T        	   0%	    0 kg/m^3
.ft R
.fi

.PP
It is recommended that the dew-point temperature be used to approximate
the precipitation temperature
.PP
\fBmkprecip\fP writes a 4-band output image to standard output:
.sp
.nf
.ft CR
	band 0 = total precipitation mass (kg/m^2) (= input band 0)
	band 1 = % of total mass that's snow (0.0 to 1.0)
	band 2 = snow's density (kg/m^3)
	band 3 = precipitation temperature (C)	   (= input band 1)
.ft R
.fi

.PP
This output image is the format isnobal expects for its precipitation
images.
.PP
Note: \fBmkprecip\fP currently uses fixed quantization max/min ranges
for all output bands.  This causes quantization problems for band 0
and band 3 of the output image (input bands 0 and 1).
To fix this problem, those output bands have been set to 12 bits.
The program needs to be re-written to pass the input quantization
through to the output image.
.SH OPTIONS
.PP
none
.SH OPERANDS
.TP
[\fIimage\fP]
input image:   precip, %_snow, snow_density, precip_temp
.SH EXAMPLES
.PP
none
.SH FILES
.PP
none
.SH DIAGNOSTICS
.PP
none
.SH RESTRICTIONS
.PP
none
.SH HISTORY
.TP
Nov 1996
Changed # of bits per output band from 16 to 8, J. Domingo, OSU
.TP
Oct 2001
Changed quantization range and number of bits (from 8 to 12)
for output bands 0 and 3 (precip mass and temperature)
to reduce quantization problems (it seemed like such a
good idea in 1996...), D. Marks, ARS-NWRC
.SH BUGS
.PP
none
.SH SEE ALSO
.TP
IPW
\fBbowvap\fP,
\fBipmx\fP
.PP
Link & Marks, 1999a,
Marks, Domingo, Susong, Link, & Garen 1999a,
Marks, Link, Winstral, & Garen 1992b
